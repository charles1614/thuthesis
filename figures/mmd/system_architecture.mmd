graph LR
    subgraph Layer12["Layer 1-2: Data Processing & Diffusion Model"]
        A["Data<br/>Input"] --> B["Format<br/>Conversion"]
        B --> C["Geometry<br/>Condition"]
        C --> D["Condition<br/>Encoder"]
        D --> E["Diffusion<br/>Engine"]
        E --> F["Supervision<br/>Signal"]
    end
    
    Layer12 --> Layer34
    
    subgraph Layer34["Layer 3-4: 4DGS Representation & Rendering"]
        G["Scene<br/>Manager"] --> H["Background<br/>𝒢_bkgd"]
        G --> I["Dynamic<br/>𝒢_obj"]
        G --> J["Environment<br/>𝒢_sky"]
        H --> K["Multi-modal<br/>Renderer"]
        I --> K
        J --> K
        K --> L["Rendered<br/>Output"]
    end
    
    Layer34 --> Layer5
    
    subgraph Layer5["Layer 5: Diffusion Supervision & Optimization"]
        M["Loss<br/>Computation"] --> N["Parameter<br/>Update"]
        N --> O["Gaussian<br/>Refinement"]
    end
    
    F -.-> M
    L -.-> M
    O -.-> G
    
    classDef normalStyle fill:#FFFFFF,stroke:#999999,stroke-width:2px
    classDef importantStyle fill:#E3F2FD,stroke:#1976D2,stroke-width:2px
    
    class A,D,G,K,M importantStyle
    class B,C,E,F,H,I,J,L,N,O normalStyle